
# Serverless knowledge catalog management system
## 1. Diagram
Diagram of the proposed architecture for the application:
![AWS services diagram](https://viewer.diagrams.net/?tags=%7B%7D&title=Assignment2.drawio#R%3Cmxfile%3E%3Cdiagram%20name%3D%22Page-1%22%20id%3D%22-TUJDvyJmTpmmQT7aux2%22%3E7Zxbc5s4GIZ%2FjS%2FTQRyMfeljNzPpTrbpTg83HgVkTAPII2TH3l%2B%2FEghzENhuHRu7UZuZoA8dQPqeV0JS1DFG4eYjgcvFJ%2ByioKNr7qZjjDu6DkzDZL%2B4ZZtabKOXGjziuyJSbnjy%2F0PCqAnryndRXIpIMQ6ovywbHRxFyKElGyQEv5ajzXFQLnUJPSQZnhwYyNavvksXwtq1zPzGX8j3FlnRoNtP74Qwiy1eJV5AF78WTMakY4wIxjS9CjcjFPDayyomTTdtuLt7MoIiekwCcx0P%2B4%2FmfTAbjxc%2F7m20BF%2Fv9DSXNQxW4o0HX5%2BYYRTglSuem26z2lhiP6JJjVpD9sPKG2kdi90Z8dAH3aoYqmG7bAByiOdRNlTDdtkAqtmDSvmg%2BoAFgxQqZa9VytcKD8h%2BjCFe0cCP0GjnexozegS6PmuSEQ4wYbYIR6z2hgsaBiwE2OXrwqfoaQkdXquvjBtmm%2BOICu8HehYWFc9zZf5NISuLiDySlkBkskZpg6RxggAuY%2F95l4ogZ0Vif40%2BozjNnFuZIy75dbjxOLQf4GtsfvAIXi2Tx79nZdXenbHLmcMdYwYDyjOiBL%2Bg7EU7usH%2BT7nzDed%2BEFQqYI0I9RlYg8D3eP4U8%2BKgCAVonuTIasWPvIckNDY0URN1RbgwXiBXvJLMgsCDl4o2BZNg4yPCIaJky6KIu7omOBVKZYrga459rydsiwLx3cwIhdR4u6xzGNmF4PEX2DQkNtHqLmZOt8iwVWgqNFM0CfJ8fk9mUtMG5qB7ViaBaU%2BGgyKToJbJvT3Q0aCaBznt2nWc6ufi1JI4HUEKA%2BwNHu8lTuMXRJ2FaO5aaGvBrYO3FmAZ4lK0BKuaEqrGOpstG4EcLSNRNtbZ6mSnmhrUpAaV1M3QN%2FUfRRyYfWIDyx7WATRP%2FlV7nAydB%2FiMgkcc%2BzThb%2FyMKcXhQbYcxDWiLD6HhAbGy%2FS15v6GP0e9WhDEugjioFQrmM7EdaoBl%2F7MgxS9wu3xqBonoqp3ZVbtnoxqZntzUrsSqR6ibDATzJjsh7GC9VZgHdtA094NrAEMn114Rk6NrlkCFbTMqS1xmvA5c9J%2BVXF6I5yO%2BrqV0PI%2BOHW3EQyx%2B3xGUi27vS715z%2Fey7fp3336iTo%2F7hafv3t365oJJN6lprg%2Bb2csrYL1NmB9352qhOCx9B7fqQK9XVTl%2BaQSqlsEiYJVwapg5f3qBYfAtbCa%2B2F1WKXFSOGqcFW48nDbfas8B%2ByiAFGkRsKKVkVrhVaz7c5VngeGrqvmgBWkCtIdpFbbXaotoYhcD2X1iwldYA9HMJjk1iHBq8jdrUDncR4wb8zE%2BBNRuhWtBlcUl5sUbXz6rXD9nTclc%2BU0NN6Ilk0C20LgERGfvXayCSCxRawKvhUDhZx4MM8qCW2LoWpmzoqsK1tdeFX8Ruuz6kx8bU88MZKhkLAPjj3xuvXeRFAAqb8uP1ydbyRJB4TAbSGC0Nc850duyJ0U9CvTn%2F1%2B0c8Oxjf7FbdMHyB30t2b%2FL7fAnme5ePkS4dvP5iKBYyGroY3aiJPZZ%2BUJKiqVKHvuqn7870kMN9kUu6uxvvUQ2ygFIk7u12LRb9qxrRRVbjk26UmuBMF%2FpqjSC17p5u12WY54Pk8Zv5bFaE3aN%2Be0qUr0aXmBYlb0yVggfMLky6v1TQJ07T%2Bg%2FUmBap3QKC6mnmiJJ1fc%2FpKc65ZcxpG1tetORcZDOnHD4amTWtQN6k6%2FQOqY5pWv9QcxrVrUDZpo0ToOkXIvEURMi4y8JEX0%2FaJUMPa2k3KENDqvWKnQ5atWacpz%2B6DrLK%2F%2FoxKBJQSXbMSWbeoROZFhkPyOuF48jD5Mvnjv8LA%2Fn2N%2FDOs%2B0YzQ92L6ZCudOiadegmp6iti4yI5BXQwXj8x85Rg4ZJwXyS2hDqf7L4gMpy2BnVx1Tq04b6dGX1af4jlhPU56TFU2C14hy30Kj7%2FozhyhtVLYm34hzGTTiHWiNoxTnMW3AOXc3dtuIcx26madc51HRaK85xbQPJ2sKzVZ%2FCl%2BL94JPkMGqXbMl2Nbtkx2PDNEed97JL1nfZA%2Fh0O4ORO4OOg%2BJ4FsIIeihMmD3boUR2tzKb3PIOdyBRm5zoN8UkhEmT6toThc6LAvmCIKvqvBpdfGfHPSWnNs538J%2FyVwT7p1KrOgh6LQuhLp8l82%2FMmmKv7v2SZzWcKnjc4Zh%2FqsOt4qT0o9xsf88KKudy7mbqiwf%2BabJHZba396jTNoBrVzC1esSXTfZNeHDi1D7yK%2BbUTQENbcaC%2BRHK6dJKfhK1Mfkf%3C%2Fdiagram%3E%3C%2Fmxfile%3E "Services used for this application.")

## 2. API documentation
After deploying the application with AWS CDK (cdk deploy) the console will output the base URL path for interacting with the API. For example, something like: https://exclp8y9a0.execute-api.your-region-2.amazonaws.com/prod/

All the following endpoints are added to this base URL with the corresponding HTTP methods.

### Get all items

<!-- GET ALL ITEMS -->
<table>
<!-- --------------------------- -->
<tr>
<td>

**GET `/catalog_items`**

</td>
</tr>
<!-- --------------------------- -->
<tr>
<td>

Retrieves all the items of the catalog

</td>
</tr>
<!-- --------------------------- -->
<tr>
<td>

Request: `GET /catalog_items/`


**Request Body:**

`None`


**Example response:**
(Status: 200)

```json
{
    "count": "2",
    "items": [
        {
            "year": {
                "N": "2025"
            },
            "id": {
                "S": "Midterm exercise@GCA"
            },
            "name": {
                "S": "Midterm exercise"
            },
            "course": {
                "S": "GCA"
            },
            "type": {
                "S": "PDF"
            }
        },
        {
            "year": {
                "N": "2024"
            },
            "id": {
                "S": "Slide deck session 1@Databases"
            },
            "name": {
                "S": "Slide deck session 1"
            },
            "course": {
                "S": "Databases"
            },
            "type": {
                "S": "Powerpoint"
            }
        }
    ]
}

```

</td>
</tr>
<!-- --------------------------- -->
</table>

---

### Add a new item
<!-- ADD NEW ITEM -->
<table>
<!-- --------------------------- -->
<tr>
<td>

**PUT `/catalog_items`**

</td>
</tr>
<!-- --------------------------- -->
<tr>
<td>

**Adds a new element to the catalog**

Item values must be passed as JSON in the body of the request, fields name and course are required. If any of the fields are not specified, the API returns a description message. 

Each field must include the data type for DynamoDB. For example, year should be in the format `{"N":"2024"}` using “N” for NUMBER, “S” for STRING, etc.


</td>
</tr>
<!-- --------------------------- -->
<tr>
<td>

Request: `PUT /catalog_items/`


**Example Request Body:**

```json
{
    "course":{"S":"CSA"},
    "name":{"S":"Gradebook"},
    "year":{"N":"2024"},
    "type":{"S":"Excel file"}
}
```


**Example response:**
(Status: 200)

```json
{
    "message": "Item added successfully",
    "Item ID": "Gradebook@CSA"
}
```

</td>
</tr>
<!-- --------------------------- -->
</table>

---

### Get an item by ID
<!-- GET ITEM BY ID-->
<table>
<!-- --------------------------- -->
<tr>
<td>

**GET `/catalog_items/by_id/?id={id}`**

</td>
</tr>
<!-- --------------------------- -->
<tr>
<td>

**Retrieves an element based on the id**

The id is passed as a query parameter in the format *name@course*. If the id is not correctly specified, the response is a description message.

</td>
</tr>
<!-- --------------------------- -->
<tr>
<td>

Example request: `GET /catalog_items/by_id?id=Midterm exercise@GCA`


**Request Body:**
`None`

**Example response:**
(Status: 200)

```json
{
    "year": {
        "N": "2025"
    },
    "id": {
        "S": "Midterm exercise@GCA"
    },
    "name": {
        "S": "Midterm exercise"
    },
    "course": {
        "S": "GCA"
    },
    "type": {
        "S": "PDF"
    }
}
```

</td>
</tr>
<!-- --------------------------- -->
<!-- --------------------------- -->
<tr>
<td>

Example request: `GET /catalog_items/by_id?id=Nonexistent@Python`


**Request Body:**
`None`

**Example response:**
(Status: 404)

```json
{
    "message": "Item not found"
}
```

</td>
</tr>
<!-- --------------------------- -->
</table>

---

### Delete an item
<!-- DELETE ITEM -->
<table>
<!-- --------------------------- -->
<tr>
<td>

**DELETE `/catalog_items/by_id?id={id}`**

</td>
</tr>
<!-- --------------------------- -->
<tr>
<td>

**Deletes an element based on the id**

The id is passed as a query parameter in the format *name@course*. If the id is not correctly specified, the response is a description message. If the item does not exist, the response is a message that says that the item cannot be deleted (not found, 404).


</td>
</tr>
<!-- --------------------------- -->
<tr>
<td>

Example equest: `DELETE /catalog_items/by_id?id=Midterm@CSA`


**Request Body:**
`None`


**Example response:**
(Status: 200)

```json
{
    "message": "Item Midterm@CSA deleted successfully"
}
```

</td>
</tr>
<!-- --------------------------- -->
</table>

---

### Get items by year
<!-- GET ITEM BY YEAR -->
<table>
<!-- --------------------------- -->
<tr>
<td>

**DELETE `/catalog_items/by_year?year={year}`**

</td>
</tr>
<!-- --------------------------- -->
<tr>
<td>

**Retrieves all the elements for a specified year**

The year is passed as a query parameter. If the year is not correctly specified, the response is a description message.


</td>
</tr>
<!-- --------------------------- -->
<tr>
<td>

Example equest: `GET /catalog_items/by_year?year=2025`


**Request Body:**
`None`


**Example response:**
(Status: 200)

```json
{
    "count": "2",
    "Items": [
        {
            "year": {
                "N": "2025"
            },
            "id": {
                "S": "Midterm exercise@GCA"
            },
            "course": {
                "S": "GCA"
            },
            "name": {
                "S": "Midterm exercise"
            },
            "type": {
                "S": "PDF"
            }
        },
        {
            "year": {
                "N": "2025"
            },
            "id": {
                "S": "Other file@OS"
            },
            "course": {
                "S": "OS"
            },
            "name": {
                "S": "Other file"
            }
        }
    ]
}
```

</td>
</tr>
<!-- --------------------------- -->
</table>

---

### Get items by course
<!-- GET ITEM BY COURSE -->
<table>
<!-- --------------------------- -->
<tr>
<td>

**DELETE `/catalog_items/by_course?course={course}`**

</td>
</tr>
<!-- --------------------------- -->
<tr>
<td>

**Retrieves all the elements for a specified course**

The course is passed as a query parameter. If the course is not correctly specified, the response is a description message.


</td>
</tr>
<!-- --------------------------- -->
<tr>
<td>

Example equest: `GET /catalog_items/by_course?course=CSA`


**Request Body:**
`None`


**Example response:**
(Status: 200)

```json
{
    "count": "2",
    "Items": [
        {
            "year": {
                "N": "2024"
            },
            "id": {
                "S": "Gradebook@CSA"
            },
            "course": {
                "S": "CSA"
            },
            "name": {
                "S": "Gradebook"
            },
            "type": {
                "S": "Excel file"
            }
        },
        {
            "id": {
                "S": "Other@CSA"
            },
            "course": {
                "S": "CSA"
            },
            "name": {
                "S": "Other"
            }
        }
    ]
}
```

</td>
</tr>
<!-- --------------------------- -->
</table>